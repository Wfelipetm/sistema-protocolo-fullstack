
# üìò Explica√ß√£o T√©cnica do DER ‚Äì Sistema de Protocolo

## üîß Objetivo do Sistema
Gerenciar a tramita√ß√£o de **processos administrativos** entre **setores**, com controle de **requerentes**, **pagamentos**, **documentos**, e **respons√°veis internos**.

## üß± Entidades Principais e Suas Fun√ß√µes

### 1. UNIDADE
Representa um √≥rg√£o ou sede f√≠sica (ex: "Unidade Central"). Uma unidade pode receber muitos processos.

### 2. SECRETARIA
Representa um setor administrativo superior (ex: "Secretaria de Obras"). Uma secretaria possui v√°rios setores.

### 3. SETOR
Departamentos da secretaria. Podem ser origem, destino ou requerente do processo.

### 4. REQUERENTE
Pessoa f√≠sica ou jur√≠dica que solicita um protocolo. Cada requerente pode abrir v√°rios processos.

### 5. RESPONS√ÅVEL
Funcion√°rio da prefeitura que tramita processos. Cada respons√°vel atua sobre diversos tr√¢mites.

### 6. PROCESSO
Entidade central do sistema. Relaciona-se com requerente, unidade, secretaria, setores, tr√¢mites, pagamentos e documentos.

### 7. TR√ÇMITE
Hist√≥rico da movimenta√ß√£o do processo entre setores. Vinculado a um respons√°vel.

### 8. PAGAMENTO
Pagamentos vinculados a um processo. Um processo pode ter v√°rios.

### 9. DOCUMENTO_CONTROLE
Documentos anexos e registros enviados com o processo.

## üîó Relacionamentos-Chave

| Pai         | Filho               | Tipo |
|-------------|---------------------|------|
| SECRETARIA  | SETOR               | 1:N  |
| SETOR       | RESPONS√ÅVEL         | 1:N  |
| REQUERENTE  | PROCESSO            | 1:N  |
| UNIDADE     | PROCESSO            | 1:N  |
| PROCESSO    | TR√ÇMITE             | 1:N  |
| PROCESSO    | PAGAMENTO           | 1:N  |
| PROCESSO    | DOCUMENTO_CONTROLE  | 1:N  |

## üöÄ Backend ‚Äì Considera√ß√µes

- Autentica√ß√£o por respons√°veis
- Valida√ß√£o de CPF/CNPJ √∫nico
- Campos obrigat√≥rios com FK
- Logs: created_at / updated_at
- Filtros √∫teis nas rotas

## üé® Frontend ‚Äì Considera√ß√µes

- Formul√°rios complexos
- Telas para hist√≥rico de tr√¢mite
- Pain√©is para pagamentos e documentos
- Selects din√¢micos para setores, unidades, respons√°veis

## üì¶ Rotas RESTful Sugeridas

### Processo
GET /processos  
POST /processos  
GET /processos/:id  
PUT /processos/:id  
DELETE /processos/:id

### Tr√¢mite / Pagamento / Documento
GET /processos/:id/tramites  
POST /tramites  
GET /processos/:id/pagamentos  
POST /pagamentos  
GET /processos/:id/documentos  
POST /documentos

### Relacionados
GET /secretarias/:id/setores  
GET /setores/:id/responsaveis  
GET /requerentes/:id/processos








üß± Entidades Principais e Suas Fun√ß√µes

1. UNIDADE

Representa um √≥rg√£o ou sede f√≠sica (ex: "Unidade Central").
Relacionamento: uma unidade pode receber muitos processos (1:N com processo).
Backend: pode ser usada para autentica√ß√£o ou filtros por unidade.
Frontend: dropdown para selecionar onde o processo ser√° aberto.

2. SECRETARIA

Representa um setor administrativo superior (ex: "Secretaria de Obras").
Relacionamento: uma secretaria possui v√°rios setores (1:N com setor).
Frontend: associada ao setor, usada para hierarquia administrativa.

3. SETOR

Departamentos ou divis√µes da secretaria.
Pode ser:
setor de abertura do processo
setor destino do processo
setor do respons√°vel
Relacionamentos:
N:1 com secretaria
1:N com processo, responsavel e tramite

4. REQUERENTE

Pessoa f√≠sica ou jur√≠dica que solicita um protocolo.
Campos importantes: CPF/CNPJ, tipo (ENUM).
Relacionamento: 1:N com processo.


5. RESPONS√ÅVEL

Funcion√°rio da prefeitura vinculado a um setor.
Respons√°vel por tramitar processos.
Relacionamento: 1:N com tramite.

6. PROCESSO

Entidade central.
Representa o documento/protocolo administrativo.
Relacionamentos:
N:1 com requerente, unidade, secretaria, setores
1:N com tramite, pagamento, documento_controle
Frontend: CRUD completo, com formul√°rios complexos.


7. TR√ÇMITE

Hist√≥rico de movimenta√ß√µes do processo.
Define a origem, destino e o respons√°vel da tramita√ß√£o.
Backend: deve ser registrado sempre que houver mudan√ßa de setor.

8. PAGAMENTO

Informa√ß√µes financeiras vinculadas a um processo.
Pode haver mais de um pagamento para um mesmo processo.
Campos: valor, data, identificador.


9. DOCUMENTO_CONTROLE

Armazena dados dos documentos enviados com o processo.
Pode incluir anexos, n√∫mero de guia, apensos etc.


| Entidade Pai | Entidade Filha      | Cardinalidade | Tipo |
| ------------ | ------------------- | ------------- | ---- |
| SECRETARIA   | SETOR               | 1\:N          | FK   |
| SETOR        | RESPONS√ÅVEL         | 1\:N          | FK   |
| REQUERENTE   | PROCESSO            | 1\:N          | FK   |
| UNIDADE      | PROCESSO            | 1\:N          | FK   |
| PROCESSO     | TR√ÇMITE             | 1\:N          | FK   |
| PROCESSO     | PAGAMENTO           | 1\:N          | FK   |
| PROCESSO     | DOCUMENTO\_CONTROLE | 1\:N          | FK   |




üöÄ Backend ‚Äì Considera√ß√µes

Autentica√ß√£o: usu√°rios internos (respons√°veis) podem tramitar processos.
Valida√ß√£o:
CPF/CNPJ √∫nicos para requerentes.
FK obrigat√≥rias em tramites/pagamentos/documentos.
Auditoria: campos created_at e updated_at em todas as tabelas.
Filtros recomendados:
/processos?setor=...
/tramites?responsavel_id=...
/requerentes/:id/processos



üé® Frontend ‚Äì Considera√ß√µes

Formul√°rios complexos para cria√ß√£o de processo (requerente, setor, documentos, pagamento).
Telas espec√≠ficas:
Listagem e filtro de processos por setor, unidade ou status.
Hist√≥rico de tr√¢mite por processo.
Tela de abertura e finaliza√ß√£o de tramites.
Painel de pagamentos vinculados.
Componentes reutiliz√°veis:
Select para unidades, setores e respons√°veis.
Visualiza√ß√£o de documentos enviados e status de tramita√ß√£o.